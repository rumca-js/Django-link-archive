{% extends base_generic %}

{% block content %}
  <h1>{{ object.title }}</h1>

  <p>
   {% if object.source_obj %}
    <a href="{% url 'rsshistory:source-detail' object.source_obj.id %}" class="simplebutton">RSS Source</a>
   {% endif %}

  {% if user.is_staff %}
    <a href="{% url 'rsshistory:entry-edit' object.id %}" class="simplebutton">Edit entry</a>
    {% if object.persistent %}
    <a href="{% url 'rsshistory:entry-tag' object.id %}" class="simplebutton">Tag entry</a>
    {% endif %}
    <a href="{% url 'rsshistory:entry-hide' object.id %}" class="simplebutton">Hide entry</a>
    <a href="{% url 'rsshistory:entry-remove' object.id %}" class="simplebutton">Remove entry</a>
             {% if source.persistent %}
              <a href="{% url 'rsshistory:entry-notstar' object.id %}" class="simplebutton">
               Not bookmarked
              </a>
             {% else %}
              <a href="{% url 'rsshistory:entry-star' object.id %}" class="simplebutton">
               Bookmark
              </a>
             {% endif %}
  {% endif %}
  </p>

  <p>
    <a href="https://web.archive.org/web/{{archive_org_date}}000000*/{{object.link}}" class="simplebutton">View on archive.org</a>
  </p>

  <p>
      <div><strong>Source:</strong> <a href="{{ object.source }}">{{ object.source }}</a></div>
      <div><strong>Link:</strong> <a href="{{ object.link }}">{{ object.link }}</a></div>
      <div><strong>Title:</strong> {{ object.title }}</div>
      <div><strong>Publish date:</strong> {{ object.date_published }}</div>
      <div><strong>User:</strong> {{ object.user }}</div>
      <div><strong>Persistent:</strong> {{ object.persistent }},
           <strong>Language:</strong> {{ object.language }},
           <strong>Tags:</strong> {{ tag_string }}</div>
  </p>

  <p>
  <div><strong>Description:</strong></div>
  </p>
      <div>{{ object.description | safe }}</div>
      <div style="clear:both"></div>
  </p>

  <hr/>
  <h2>Comments</h2>
  <p>
  {% for comment in object.comments.all %}
      <div>{{comment.comment | linebreaks}}</div>
      <div>{{comment.date_published}} {{comment.author}}
          {% if comment.author == user.get_username %}
            <a href="{% url 'rsshistory:entry-comment-edit' comment.id %}" class="simplebutton">Edit</a>
            <a href="{% url 'rsshistory:entry-comment-remove' comment.id %}" class="simplebutton">Remove</a>
          {% endif %}
      </div>
      <hr/>
  {% endfor %}
  </p>

  <p>
  {% if user.is_authenticated %}
    <a href="{% url 'rsshistory:entry-comment-add' object.id %}" class="simplebutton">Add comment</a>
  {% endif %}
  </p>

  {% if object.has_handler %}
    <div class="youtube_player_container">
    {{object.get_handler_text | safe}}
    </div>
  {% endif %}


{% endblock %}

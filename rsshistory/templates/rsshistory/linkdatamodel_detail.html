{% extends base_generic %}

{% block content %}
  {{object_controller.get_frame_html | safe | linebreaks }}
  <div style="clear:both"></div>

  <h1><a href="{{ object.link }}">{{ object.title }}</a></h1>

  {% if user.is_staff %}
    <p>
       <a href="{% url 'rsshistory:entry-edit' object.id %}" class="simplebutton">Edit entry</a>
    {% if object.persistent %}
       <a href="{% url 'rsshistory:entry-notstar' object.id %}" class="simplebutton">
        Not bookmark
       </a>
    {% else %}
       <a href="{% url 'rsshistory:entry-star' object.id %}" class="simplebutton">
        Bookmark
       </a>
    {% endif %}
    {% if object.persistent %}
        <a href="{% url 'rsshistory:entry-tag' object.id %}" class="simplebutton">Tag entry</a>
    {% endif %}
  </p>
  {% endif %}

  <p>
      {% if object.source_obj %}
       <a href="{% url 'rsshistory:source-detail' object.source_obj.id %}" class="simplebutton">Source: {{object.source_obj.title}}</a>
      {% else %}
          {% if object.thumbnail %}
          <img src="{{object.thumbnail}}" width="20"/>
          {% else %}
          <img src="{{object.get_favicon}}" width="20"/>
          {% endif %}
       <strong>Source:</strong> <a href="{{ object.source }}">{{ object.source }}</a>
      {% endif %}
      <a href="{{object.get_archive_link}}" class="simplebutton">View on archive.org</a>
  </p>

  {% if user.is_staff %}
    <p>
      <a href="{% url 'rsshistory:entry-hide' object.id %}" class="simplebutton">Hide entry</a>
      <a href="{% url 'rsshistory:entry-remove' object.id %}" class="simplebutton">Remove entry</a>
    </p>
  {% endif %}

  <p>
      <div><strong>Url:</strong> <a href="{{ object.link }}">{{ object.link }}</a></div>
      <div>
           <strong>Publish date:</strong> {{ object.date_published }}
           <strong>User:</strong> {{ object.user }}
      </div>
      <span><strong>Artist:</strong> {{ object.artist }}</span>
      <span><strong>Album:</strong> {{ object.album }}</span>
      <span><strong>Category:</strong> {{ object.category }}</span>
      <span><strong>Subcategory:</strong> {{ object.subcategory }}</span>
      <span><strong>Language:</strong> {{ object.language }}</span>
      <span><strong>Dead:</strong> {{ videodead }}</span>
      <div><strong>View Count:</strong>{{videoviewcount}}
          <strong>Thumbs Up:</strong>{{videothumbsup}}
          <strong>Thumbs Down:</strong>{{videothumbsdown}}
          <strong>UploadDate:</strong>{{videouploaddate}}</div>
      <div><strong>Tags:</strong>
       {% for tag in object.get_tag_map %}
           <a href="{% url 'rsshistory:entries'%}?tag={{tag}}" class="simplebutton">{{tag}}</a>
       {% endfor %}
      </div>
  </p>

  {{object_controller.get_description_html | safe | linebreaks }}
  <div style="clear:both"></div>

{% if object.persistent %}
  <hr/>
  <h2>Comments</h2>
  <p>
  {% for comment in object.comments.all %}
      <div>{{comment.comment | linebreaks}}</div>
      <div>{{comment.date_published}} {{comment.author}}
          {% if comment.author == user.get_username %}
            <a href="{% url 'rsshistory:entry-comment-edit' comment.id %}" class="simplebutton">Edit</a>
            <a href="{% url 'rsshistory:entry-comment-remove' comment.id %}" class="simplebutton">Remove</a>
          {% endif %}
      </div>
      <hr/>
  {% endfor %}
  </p>

  <p>
  {% if user.is_authenticated %}
    <a href="{% url 'rsshistory:entry-comment-add' object.id %}" class="simplebutton">Add comment</a>
  {% endif %}
  </p>
{% endif %}

{% endblock %}

{% extends base_generic %}
{% block content %}

<div class="contentbuttonmenu">
    <a href="javascript:history.back()" class="simplebutton">Go Back</a>
    {% if user.is_staff %}
    <a href="{% url 'rsshistory:domains-read-bookmarks' %}" title="Reads domains from bookmarks" class="simplebutton">Read from bookmarks</a>
    <a href="{% url 'rsshistory:domains-remove-all' %}" title="Removes all domains" class="simplebutton">Remove all</a>
    {% endif %}
</div>

  <form action="{{filter_form.action_url}}" method="{{filter_form.method}}">
     <table>
     {{ filter_form }}
     <tr>
         <td>
             <input type="submit" value="Submit">
         </td>
     </tr>
     </table>
  </form>

  <hr>

<h1>Domains</h1>
  {% if domain_list %}
    <ul>
      {% for domain in domain_list %}
          {% if type == "normal" %}
            <li>
                <a href="{% url 'rsshistory:domain-detail' domain.id %}" class="simplebutton">View</a>

                <a href="https://{{domain.domain}}">{{domain.domain}}</a>, Updated:{{domain.date_last}}, First seen:{{domain.date_created}}
            </li>
          {% elif type == "clear" %}
          <div>- {{domain.domain}} Updated:{{domain.date_last}}, First seen:{{domain.date_created}}</div>
          {% endif %}
      {% endfor %}
    </ul>

    <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
               <a href="?page=1{{query_filter.get_filter_string}}" class='simplebutton'>&laquo; first</a>
               <a href="?page={{ page_obj.previous_page_number }}{{query_filter.get_filter_string}}" class='simplebutton'>previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}{{query_filter.get_filter_string}}" class='simplebutton'>next</a>
              <a href="?page={{ page_obj.paginator.num_pages }}{{query_filter.get_filter_string}}" class='simplebutton'>last &raquo;</a>
            {% endif %}

            <span>Records: {{entries_list | length}} </span>
        </span>
    </div>
  {% else %}
    No domains yet
  {% endif %}
{% endblock %}
